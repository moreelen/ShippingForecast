
// jQuery Plugin: jKit
// A very easy to use, cross platform jQuery UI toolkit that's still small in size, has the features you need and doesn't get in your way.
// Version 1.2.16 - 10. May. 2013
// http://jquery-jkit.com/
//
// by Fredi Bach
// http://fredibach.ch/jquery-plugins/

plugin.commands.chart=function(){var a={};return plugin.addCommandDefaults("chart",{max:0,delaysteps:100,speed:500,easing:"linear"}),a.execute=function(a,b){var c=plugin.settings,d=a.find("thead > tr > th.label").text(),e=a.attr("id"),f=[];a.find("thead > tr > th").each(function(){$(this).hasClass("label")||f.push($(this).text())});var g=0,h=[];a.find("tbody tr").each(function(){var a={label:$(this).find("th.label").text(),data:[]};$(this).find("th").each(function(){if(!$(this).hasClass("label")){var b=Number($(this).text());g=Math.max(b,g),a.data.push(b)}}),h.push(a)}),b.max>0&&b.max>g&&(g=b.max);var i=$("<div/>",{id:e,"class":c.prefix+"-chart"}),j=0,k=0;$.each(f,function(e,l){j++;var m=$("<div/>",{"class":c.prefix+"-chart-step"}).html("<label>"+l+"</label>").appendTo(i);$.each(h,function(a){if(h[a].data[e]>0){var i=$("<div/>",{"class":c.prefix+"-chart-plot "+c.prefix+"-chart-plot"+a}).appendTo(m);$("<div/>").text(h[a].label).delay(k).animate({width:100*(h[a].data[e]/g)+"%"},b.speed,b.easing).appendTo(i),$("<span/>",{"class":c.prefix+"-chart-info"}).text(d+" "+h[a].label+": "+h[a].data[e]+" "+b.units).appendTo(i)}}),j==f.length&&setTimeout(function(){plugin.triggerEvent("complete",a,b)},b.speed+k),k+=Number(b.delaysteps)}),a.replaceWith(i)},a}();

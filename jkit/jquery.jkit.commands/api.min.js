
// jQuery Plugin: jKit
// A very easy to use, cross platform jQuery UI toolkit that's still small in size, has the features you need and doesn't get in your way.
// Version 1.2.16 - 10. May. 2013
// http://jquery-jkit.com/
//
// by Fredi Bach
// http://fredibach.ch/jquery-plugins/

plugin.commands.api=function(){var command={};plugin.addCommandDefaults("api",{format:"json",value:"",url:"",interval:-1,template:""}),command.execute=function(a,b){""!=b.url&&readAPI(a,b)};var readAPI=function($el,options){"json"==options.format&&$.ajax({type:"GET",url:options.url,contentType:"application/json; charset=utf-8",dataType:"jsonp",error:function(){plugin.triggerEvent("error",$el,options)},success:function(data){if(""!=options.template&&void 0!==plugin.commands.template)$el.html(plugin.commands.template.templates[options.template].template.clone().show()),$el.find("[data-jkit-api]").each(function(){var value=$(this).attr("data-jkit-api");try{$(this).text(eval("data."+value.replace(/[^a-zA-Z0-9\.\[\]\_]+/g,"")))}catch(err){}}),$el.find("[data-jkit-api-if]").each(function(){var value=$(this).attr("data-jkit-api-if"),test=void 0;try{eval("test = data."+value.replace(/[^a-zA-Z0-9\.\[\]\_]+/g,""))}catch(err){}void 0==test&&$(this).remove()});else if(""!=options.value)try{$el.text(eval("data."+options.value.replace(/[^a-zA-Z0-9\.\[\]\_]+/g,"")))}catch(err){}else $el.text(data);void 0!=options.macro&&plugin.applyMacro($el,options.macro),plugin.triggerEvent("complete",$el,options),options.interval>-1&&setTimeout(function(){readAPI($el,options)},1e3*options.interval)}})};return command}();

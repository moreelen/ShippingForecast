
// jQuery Plugin: jKit
// A very easy to use, cross platform jQuery UI toolkit that's still small in size, has the features you need and doesn't get in your way.
// Version 1.2.16 - 10. May. 2013
// http://jquery-jkit.com/
//
// by Fredi Bach
// http://fredibach.ch/jquery-plugins/

plugin.commands.sort=function(){var a={};return plugin.addCommandDefaults("sort",{what:"text",by:"",start:0,end:0}),a.execute=function(a,b){var c=plugin.settings,d=a.parent().children().index(a);a.on("click",function(){plugin.triggerEvent("clicked",a,b);var e=[];a.parent().parent().parent().find("tbody > tr").each(function(){var a=$(this).find("td:nth-child("+(d+1)+")");switch(b.what){case"html":var c=a.html();break;case"class":var c=a.attr("class");break;default:var c=a.text()}(b.start>0||b.end>0)&&(c=b.end>b.start?c.substring(b.start,b.end):c.substring(b.start)),e.push({content:$(this).html(),search:c})}),a.hasClass(c.prefix+"-sort-down")?(a.parent().find("th").removeClass(c.prefix+"-sort-down").removeClass(c.prefix+"-sort-up"),a.addClass(c.prefix+"-sort-up"),e.sort(function(a,c){if("num"==b.by&&(a.search=Number(a.search),c.search=Number(c.search)),"date"==b.by){var a=new Date(a.search),c=new Date(c.search);return a.getTime()-c.getTime()}return a.search>c.search?-1:a.search<c.search?1:0})):(a.parent().find("th").removeClass(c.prefix+"-sort-down").removeClass(c.prefix+"-sort-up"),a.addClass(c.prefix+"-sort-down"),e.sort(function(a,c){if("num"==b.by&&(a.search=Number(a.search),c.search=Number(c.search)),"date"==b.by){var a=new Date(a.search),c=new Date(c.search);return c.getTime()-a.getTime()}return a.search<c.search?-1:a.search>c.search?1:0}));var f=a.parent().parent().parent().find("tbody");f.html("");var g="";$.each(e,function(a,b){g+="<tr>"+b.content+"</tr>"}),f.html(g),plugin.triggerEvent("complete",a,b)})},a}();
